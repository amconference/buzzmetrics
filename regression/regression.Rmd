---
title: "Buzzmetrics"
author: "Team Buzzmetrics"
date: "24 September 2014"
output: html_document
---

Some preliminaries...

```{r}
require(data.table)
require(ggplot2)

dataPath <- '../data/toy'
```

Helper to read a CSV file in the data path keyed by DOI:

```{r}
readDataFileWithDOI <- function(fileName) {
  table <- fread(file.path(dataPath, fileName))
  setkey(table, 'doi')
  table
}
```

Load data from the various feature files:

```{r}
titles <- readDataFileWithDOI('titles.csv')
questionMarks <- readDataFileWithDOI('question_marks.csv')
```

Go from publication date to an age in weeks, which is a bit easier to interpret:

```{r}
titles$publication_date <- as.POSIXct(titles$publication_date)
titles$age <- as.numeric(difftime(as.POSIXct('2014-09-25', tz='UTC'),
                                  titles$publication_date,
                                  units="weeks"))
```

Merge everything together on DOI:

```{r}
data <- titles
data <- data[questionMarks]
```

The simplest plot that could possibly work:

```{r, echo=FALSE}
ggplot(data) + geom_point(aes(x=age, y=score, color=question_marks))
```

The simplest regression that could possibly work:

```{r}
lmQuestionMarks <- lm(score ~ age + question_marks, data=data)
print(lmQuestionMarks)
```
